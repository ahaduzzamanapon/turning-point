import{u as H,r as a,j as e,H as q,L as F}from"./app-CcO5P8T5.js";import{A as O}from"./AuthenticatedLayout-Cpb-WKJx.js";import{M as W}from"./Modal-Dzyxo798.js";import"./transition-Ik_3AC6u.js";function X({auth:j,students:y,courses:v,batches:z,paymentMethods:k,representatives:N}){const{delete:S,post:o}=H(),[d,C]=a.useState(""),[x,_]=a.useState(""),[g,P]=a.useState(""),[u,A]=a.useState(""),[m,M]=a.useState(""),[R,p]=a.useState(!1),[r,b]=a.useState(null),[n,i]=a.useState([]),B=t=>{b(t),p(!0)},f=t=>{r&&(o(route("admin.students.verifyPayment",r.id),{is_verified:t},{preserveScroll:!0,onSuccess:()=>{p(!1),b(null),console.log("Payment verification successful!")},onError:s=>{console.error("Payment verification failed:",s)}}),window.location.reload())},I=t=>{confirm("Are you sure you want to delete this student?")&&S(route("admin.students.destroy",t))},E=t=>{o(route("admin.students.toggleActiveStatus",t))},L=t=>{t.target.checked?i(l.map(s=>s.id)):i([])},D=(t,s)=>{t.target.checked?i(c=>[...c,s]):i(c=>c.filter(h=>h!==s))},w=t=>{if(n.length===0){alert("Please select at least one student.");return}confirm(`Are you sure you want to ${t?"activate":"deactivate"} selected students?`)&&o(route("admin.students.bulkUpdateStatus"),{ids:n,is_active:t},{onSuccess:()=>{console.log("Bulk update status successful!"),i([])},onError:s=>{console.error("Bulk update status failed:",s)}})},T=t=>{console.log("Sending markRegistrationComplete as POST request."),confirm("Are you sure you want to mark this student's registration as complete?")&&o(route("admin.students.markRegistrationComplete",t))},$=()=>{if(n.length===0){alert("Please select at least one student.");return}const t=route("admin.students.bulkMarkRegistrationComplete");confirm("Are you sure you want to mark selected student's registration as complete?")&&o(t,{ids:n},{onSuccess:()=>{console.log("Bulk registration complete successful!"),i([])},onError:s=>{console.error("Bulk registration complete failed:",s)}})},l=y.filter(t=>{const s=t.candidate_full_name.toLowerCase().includes(d.toLowerCase())||t.email.toLowerCase().includes(d.toLowerCase())||t.mobile_number.includes(d),c=x===""||t.course.id===parseInt(x),h=g===""||t.batch.id===parseInt(g),U=u===""||t.payment_method.id===parseInt(u),V=m===""||t.representative.id===parseInt(m);return s&&c&&h&&U&&V});return e.jsxs(O,{user:j.user,header:e.jsx("h2",{className:"font-semibold text-xl text-white leading-tight",children:"Students"}),children:[e.jsx(q,{title:"Students"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-black/30 backdrop-blur-xl shadow-lg rounded-lg border border-white/10 p-6",children:e.jsxs("div",{className:"p-6 text-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-red-700",children:"All Students"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>w(!0),disabled:n.length===0,className:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150 disabled:opacity-50",children:"Activate Selected"}),e.jsx("button",{onClick:()=>w(!1),disabled:n.length===0,className:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150 disabled:opacity-50",children:"Deactivate Selected"}),e.jsx("button",{onClick:()=>$(),disabled:n.length===0,className:"inline-flex items-center px-4 py-2 bg-purple-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-purple-700 focus:bg-purple-700 active:bg-purple-900 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition ease-in-out duration-150 disabled:opacity-50",children:"Mark Registration Complete"})]})]}),e.jsxs("div",{className:"mb-4 flex gap-4",children:[e.jsx("input",{type:"text",placeholder:"Search students...",value:d,onChange:t=>C(t.target.value),className:"mt-1 block rounded-md border-gray-300 bg-black/30 backdrop-blur-xl border border-white/10 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 w-[20%]"}),e.jsxs("select",{value:x,onChange:t=>{_(t.target.value),P("")},className:"mt-1 block rounded-md border-gray-300 bg-black/30 backdrop-blur-xl border border-white/10 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 w-[20%]",children:[e.jsx("option",{value:"",children:"All Courses"}),v.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("select",{value:u,onChange:t=>A(t.target.value),className:"mt-1 block rounded-md border-gray-300 bg-black/30 backdrop-blur-xl border border-white/10 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 w-[20%]",children:[e.jsx("option",{value:"",children:"All Payment Methods"}),k.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("select",{value:m,onChange:t=>M(t.target.value),className:"mt-1 block rounded-md border-gray-300 bg-black/30 backdrop-blur-xl border border-white/10 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 w-[20%]",children:[e.jsx("option",{value:"",children:"All Representatives"}),N.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"text-white bg-black/10 backdrop-blur-xl border-b-4 border-[#8b2022]",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",onChange:L,checked:n.length===l.length&&l.length>0,className:"rounded border-gray-300 text-red-600 shadow-sm focus:ring-red-500"})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Email"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Course"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"batch"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Payment Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Registration Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"text-white bg-black/10 backdrop-blur-xl border-b-1 border-[#8b2022]",children:l.length>0?l.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:e.jsx("input",{type:"checkbox",checked:n.includes(t.id),onChange:s=>D(s,t.id),className:"rounded border-gray-300 text-red-600 shadow-sm focus:ring-red-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:t.candidate_full_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:t.mobile_number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:t.course.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:t.batch.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:t.is_active?e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Active"}):e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.payment_status==="verified"?"bg-green-100 text-green-800":t.payment_status==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:t.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.registration_status==="completed"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.registration_status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx(F,{href:route("admin.students.edit",t.id),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>I(t.id),className:"text-red-600 hover:text-red-900 mr-3",children:"Delete"}),e.jsx("button",{onClick:()=>E(t.id),className:`${t.is_active?"bg-yellow-500 hover:bg-yellow-600":"bg-green-500 hover:bg-green-600"} text-white px-3 py-1 rounded-md text-xs font-semibold`,children:t.is_active?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>B(t),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-xs font-semibold ml-3",children:"Verify Payment"}),t.registration_status!=="completed"&&e.jsx("button",{onClick:()=>T(t.id),className:"bg-purple-500 hover:bg-purple-600 text-white px-3 py-1 rounded-md text-xs font-semibold ml-3",children:"Mark Complete"})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"px-6 py-4 whitespace-nowrap text-sm text-white text-center",children:"No students found."})})})]})})]})})})}),e.jsx(W,{show:R,onClose:()=>p(!1),maxWidth:"2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Payment Details"}),r&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Candidate Name:"})," ",r.candidate_full_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mobile Number:"})," ",r.mobile_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",r.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Method:"})," ",r.payment_method.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Sender Mobile Number:"})," ",r.sender_mobile_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount Sent:"})," ",r.amount_sent]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Transaction ID:"})," ",r.transaction_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Course Interested:"})," ",r.course.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Batch Interested:"})," ",r.batch.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Representative:"})," ",r.representative.name]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>f(!1),className:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150",children:"Reject Payment"}),e.jsx("button",{onClick:()=>f(!0),className:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150",children:"Verify Payment"})]})]})})]})}export{X as default};
